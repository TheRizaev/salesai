{% extends 'dashboard/base.html' %}

{% block title %}Создать агента{% endblock %}

{% block content %}
<div class="page-header">
    <div>
        <h1 class="page-title">Создать нового агента</h1>
        <p class="page-subtitle">Настройте своего чат-бота за несколько минут</p>
    </div>
</div>

<div class="glass-card" style="max-width: 800px; margin: 0 auto;">
    <form method="POST" style="display: flex; flex-direction: column; gap: 25px;">
        {% csrf_token %}
        
        <!-- Название бота -->
        <div>
            <label style="display: block; font-weight: 600; margin-bottom: 10px; color: white;">
                <i class="fa-solid fa-tag"></i>
                Название бота *
            </label>
            <input 
                type="text" 
                name="name" 
                required
                placeholder="Например: Бот поддержки"
                style="width: 100%; padding: 14px 18px; background: rgba(15, 23, 42, 0.8); border: 1px solid var(--glass-border); border-radius: 10px; color: white; font-size: 1rem; transition: 0.3s;"
                onfocus="this.style.borderColor='var(--accent-primary)'; this.style.boxShadow='0 0 0 4px rgba(99, 102, 241, 0.1)';"
                onblur="this.style.borderColor='var(--glass-border)'; this.style.boxShadow='none';"
            >
        </div>

        <!-- Платформа -->
        <div>
            <label style="display: block; font-weight: 600; margin-bottom: 10px; color: white;">
                <i class="fa-solid fa-layer-group"></i>
                Платформа *
            </label>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px;">
                <label class="platform-option">
                    <input type="radio" name="platform" value="telegram" required style="display: none;">
                    <div class="platform-card-select">
                        <div class="platform-icon" style="color: #229ED9;">
                            <i class="fa-brands fa-telegram"></i>
                        </div>
                        <div class="platform-name">Telegram</div>
                    </div>
                </label>

                <label class="platform-option">
                    <input type="radio" name="platform" value="whatsapp" required style="display: none;">
                    <div class="platform-card-select">
                        <div class="platform-icon" style="color: #25D366;">
                            <i class="fa-brands fa-whatsapp"></i>
                        </div>
                        <div class="platform-name">WhatsApp</div>
                    </div>
                </label>

                <label class="platform-option">
                    <input type="radio" name="platform" value="vk" required style="display: none;">
                    <div class="platform-card-select">
                        <div class="platform-icon" style="color: #0077FF;">
                            <i class="fa-brands fa-vk"></i>
                        </div>
                        <div class="platform-name">VK</div>
                    </div>
                </label>

                <label class="platform-option">
                    <input type="radio" name="platform" value="instagram" required style="display: none;">
                    <div class="platform-card-select">
                        <div class="platform-icon" style="color: #E4405F;">
                            <i class="fa-brands fa-instagram"></i>
                        </div>
                        <div class="platform-name">Instagram</div>
                    </div>
                </label>
            </div>
        </div>

        <!-- Описание -->
        <div>
            <label style="display: block; font-weight: 600; margin-bottom: 10px; color: white;">
                <i class="fa-solid fa-align-left"></i>
                Описание (необязательно)
            </label>
            <textarea 
                name="description" 
                rows="4"
                placeholder="Опишите, для чего предназначен этот бот..."
                style="width: 100%; padding: 14px 18px; background: rgba(15, 23, 42, 0.8); border: 1px solid var(--glass-border); border-radius: 10px; color: white; font-size: 1rem; transition: 0.3s; resize: vertical; font-family: inherit;"
                onfocus="this.style.borderColor='var(--accent-primary)'; this.style.boxShadow='0 0 0 4px rgba(99, 102, 241, 0.1)';"
                onblur="this.style.borderColor='var(--glass-border)'; this.style.boxShadow='none';"
            ></textarea>
        </div>

        <!-- Подсказка -->
        <div style="background: rgba(99, 102, 241, 0.1); border: 1px solid rgba(99, 102, 241, 0.3); border-radius: 10px; padding: 15px 20px; display: flex; gap: 15px; align-items: flex-start;">
            <i class="fa-solid fa-lightbulb" style="color: var(--accent-primary); font-size: 1.3rem; margin-top: 2px;"></i>
            <div>
                <div style="font-weight: 600; color: white; margin-bottom: 5px;">Совет:</div>
                <div style="color: #cbd5e1; font-size: 0.9rem; line-height: 1.5;">
                    После создания бота вам нужно будет настроить токен API для выбранной платформы и загрузить базу знаний для работы AI.
                </div>
            </div>
        </div>

        <!-- Кнопки -->
        <div style="display: flex; gap: 15px; justify-content: flex-end; margin-top: 10px;">
            <a href="{% url 'agents_list' %}" class="btn btn-secondary">
                <i class="fa-solid fa-xmark"></i>
                Отмена
            </a>
            <button type="submit" class="btn btn-primary">
                <i class="fa-solid fa-check"></i>
                Создать агента
            </button>
        </div>
    </form>
</div>

<style>
.platform-option {
    cursor: pointer;
}

.platform-card-select {
    background: rgba(15, 23, 42, 0.6);
    border: 2px solid var(--glass-border);
    border-radius: 12px;
    padding: 25px;
    text-align: center;
    transition: all 0.3s;
    cursor: pointer;
}

.platform-card-select:hover {
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(99, 102, 241, 0.3);
    transform: translateY(-3px);
}

.platform-option input:checked + .platform-card-select {
    background: rgba(99, 102, 241, 0.15);
    border-color: var(--accent-primary);
    box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
}

.platform-icon {
    font-size: 2.5rem;
    margin-bottom: 12px;
}

.platform-name {
    font-weight: 600;
    color: white;
    font-size: 1rem;
}
</style>
{% endblock %}
