{% extends 'dashboard/base.html' %}

{% block title %}Настройки{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">Настройки</h1>
</div>

<div class="settings-grid" style="display: grid; grid-template-columns: 240px 1fr; gap: 30px;">
    <div class="settings-menu">
        <a href="#profile" class="settings-nav-link active" onclick="showSection('profile', event)">
            <i class="fa-solid fa-user"></i> Профиль
        </a>
        <a href="#security" class="settings-nav-link" onclick="showSection('security', event)">
            <i class="fa-solid fa-lock"></i> Безопасность
        </a>
        <a href="#billing" class="settings-nav-link" onclick="showSection('billing', event)">
            <i class="fa-solid fa-credit-card"></i> Подписка
        </a>
    </div>

    <div class="settings-content">
        <div id="profile-section" class="settings-section">
            <div class="glass-card">
                <div class="card-header"><h2 class="card-title">Профиль</h2></div>
                <form method="POST">
                    {% csrf_token %}
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div>
                            <label style="display:block; margin-bottom:8px">Имя</label>
                            <input type="text" name="first_name" value="{{ request.user.first_name }}" style="width:100%; padding:10px;">
                        </div>
                        <div>
                            <label style="display:block; margin-bottom:8px">Фамилия</label>
                            <input type="text" name="last_name" value="{{ request.user.last_name }}" style="width:100%; padding:10px;">
                        </div>
                    </div>
                    <button class="btn btn-primary">Сохранить</button>
                </form>
            </div>
        </div>
        
        <div id="security-section" class="settings-section" style="display: none;">
            <div class="glass-card">
                <div class="card-header"><h2 class="card-title">Безопасность</h2></div>
                <p style="color: var(--text-secondary);">Здесь можно сменить пароль.</p>
                <a href="#" class="btn btn-secondary" style="margin-top: 15px;">Сменить пароль</a>
            </div>
        </div>
        
         <div id="billing-section" class="settings-section" style="display: none;">
            <div class="glass-card">
                <div class="card-header"><h2 class="card-title">Подписка</h2></div>
                <div style="padding: 20px; background: rgba(99,102,241,0.1); border-radius: 10px; border: 1px solid var(--accent-primary);">
                    <h3>Текущий план: Free</h3>
                    <p style="margin: 10px 0;">Лимит: 100 сообщений/мес</p>
                    <a href="{% url 'pricing' %}" class="btn btn-primary">Обновить</a>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* Доп стили для настроек */
.settings-nav-link {
    display: flex; align-items: center; gap: 10px; padding: 12px 15px;
    color: var(--text-secondary); text-decoration: none; border-radius: 8px; margin-bottom: 5px;
}
.settings-nav-link:hover { background: rgba(255,255,255,0.05); color: white; }
.settings-nav-link.active { background: rgba(99,102,241,0.1); color: var(--accent-primary); font-weight: 600; }
</style>

<script>
function showSection(id, e) {
    e.preventDefault();
    document.querySelectorAll('.settings-section').forEach(el => el.style.display = 'none');
    document.getElementById(id + '-section').style.display = 'block';
    document.querySelectorAll('.settings-nav-link').forEach(el => el.classList.remove('active'));
    e.target.closest('a').classList.add('active');
}
</script>
{% endblock %}